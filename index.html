<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>French Flashcard Game v1.21.1 (Peek Right Shift)</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Montserrat', sans-serif;
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  margin: 0;
  min-height: 100vh;
  position: relative;
}
h1 { margin-bottom: 20px; color: #333; }
.card {
  background: white;
  padding: 25px;
  border-radius: 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
  text-align: center;
  max-width: 500px;
  width: 100%;
  height: 300px;
  margin-bottom: 20px;
  opacity: 1;
  transition: opacity 0.4s ease, transform 0.4s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
}
button {
  margin: 8px;
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  background: #0077cc;
  color: white;
  cursor: pointer;
  font-size: 16px;
  font-family: 'Montserrat', sans-serif;
  transition: background 0.3s, transform 0.2s;
}
button:hover { background: #005fa3; transform: scale(1.05); }
#display-word { 
  font-size: 38px; 
  font-weight: 700; 
  margin-bottom: 20px; 
  transition: opacity 0.3s ease; 
}
.version { position: fixed; bottom: 10px; right: 15px; font-size: 14px; color: #666; }
#score-card { text-align: center; }
#score-card button { margin-top: 10px; }
.submenu { display: flex; flex-direction: column; }
input { 
  font-size: 20px; 
  text-align:center; 
  border-radius:8px; 
  border:2px solid #ccc; 
  transition: background 0.3s, border-color 0.3s; 
  padding:8px; 
  margin-bottom: 15px;
}
input.correct { background:#e6ffe6; border-color:#2ecc71; }
input.incorrect { background:#ffe5e5; border-color:#e74c3c; }
.fade-out { opacity:0; transform: scale(0.95);}
.hint { 
  font-size: 14px; 
  color: #666; 
  margin-top: 10px; 
  margin-bottom: 15px;
}
</style>
</head>
<body>
<h1>French Flashcard Game</h1>

<!-- Main Menu -->
<div class="card" id="menu">
  <p>Select practice mode:</p>
  <button onclick="showSubMenu('fr-en')">French → English</button>
  <button onclick="showSubMenu('en-fr')">English → French</button>
  <button onclick="showSubMenu('mixed')">Mixed Practice</button>
</div>

<!-- Sub Menu -->
<div class="card submenu" id="submenu" style="display:none;">
  <p>Select category:</p>
  <button onclick="startGame(currentMode, 'subjects')">Subjects</button>
  <button onclick="startGame(currentMode, 'infinitives')">Infinitives</button>
  <button onclick="goBackToMain()">Back</button>
</div>

<!-- Game Card -->
<div class="card" id="game" style="display:none;">
  <div id="display-word"></div>
  <input type="text" id="answer" placeholder="Type your answer">
  <div class="hint">Hold Right Shift to peek translation</div>
  <button onclick="finishGame()">Finish</button>
</div>

<!-- Score -->
<div class="card" id="score-card" style="display:none;">
  <h2>Score</h2>
  <div id="score"></div>
  <button onclick="goBackToMain()">Back to Menu</button>
  <button onclick="resetAndPlayAgain()">Play Again</button>
</div>

<div class="version">v1.21.1 (Right Shift Peek)</div>

<script>
// Word Lists
const subjects = [
  { fr: "la pomme", en: "apple" },
  { fr: "le pain", en: "bread" },
  { fr: "le lait", en: "milk" },
  { fr: "le fromage", en: "cheese" },
  { fr: "le beurre", en: "butter" },
  { fr: "l'œuf", en: "egg" },
  { fr: "le riz", en: "rice" },
  { fr: "les pâtes", en: "pasta" },
  { fr: "la tomate", en: "tomato" },
  { fr: "la carotte", en: "carrot" },
  { fr: "la pomme de terre", en: "potato" },
  { fr: "le concombre", en: "cucumber" },
  { fr: "la salade", en: "lettuce" },
  { fr: "le citron", en: "lemon" },
  { fr: "l'orange", en: "orange" },
  { fr: "la banane", en: "banana" },
  { fr: "la fraise", en: "strawberry" },
  { fr: "le raisin", en: "grape" },
  { fr: "la cerise", en: "cherry" },
  { fr: "le chocolat", en: "chocolate" },
  { fr: "le gâteau", en: "cake" },
  { fr: "le biscuit", en: "cookie" },
  { fr: "la glace", en: "ice cream" },
  { fr: "le sucre", en: "sugar" },
  { fr: "le sel", en: "salt" },
  { fr: "le poivre", en: "pepper" },
  { fr: "la viande", en: "meat" },
  { fr: "le poulet", en: "chicken" },
  { fr: "le bœuf", en: "beef" },
  { fr: "le porc", en: "pork" },
  { fr: "le poisson", en: "fish" },
  { fr: "le saumon", en: "salmon" },
  { fr: "la crevette", en: "shrimp" },
  { fr: "le crabe", en: "crab" },
  { fr: "le homard", en: "lobster" },
  { fr: "la carafe", en: "carafe" },
  { fr: "la tasse", en: "cup" },
  { fr: "le verre", en: "glass" },
  { fr: "l'assiette", en: "plate" },
  { fr: "la fourchette", en: "fork" },
  { fr: "le couteau", en: "knife" },
  { fr: "la cuillère", en: "spoon" },
  { fr: "la table", en: "table" },
  { fr: "la chaise", en: "chair" },
  { fr: "le lit", en: "bed" },
  { fr: "le canapé", en: "sofa" },
  { fr: "le fauteuil", en: "armchair" },
  { fr: "la lampe", en: "lamp" },
  { fr: "la fenêtre", en: "window" },
  { fr: "la porte", en: "door" },
  { fr: "le mur", en: "wall" },
  { fr: "le sol", en: "floor" },
  { fr: "le plafond", en: "ceiling" },
  { fr: "le tapis", en: "rug" },
  { fr: "la cuisine", en: "kitchen" },
  { fr: "la salle de bain", en: "bathroom" },
  { fr: "la douche", en: "shower" },
  { fr: "la baignoire", en: "bathtub" },
  { fr: "le miroir", en: "mirror" },
  { fr: "le lavabo", en: "sink" },
  { fr: "les toilettes", en: "toilet" },
  { fr: "le placard", en: "cupboard" },
  { fr: "le frigo", en: "fridge" },
  { fr: "le four", en: "oven" },
  { fr: "le micro-ondes", en: "microwave" },
  { fr: "la cuisinière", en: "stove" },
  { fr: "la casserole", en: "saucepan" },
  { fr: "la poêle", en: "frying pan" },
  { fr: "le panier", en: "basket" },
  { fr: "le sac", en: "bag" },
  { fr: "le sac à dos", en: "backpack" },
  { fr: "la valise", en: "suitcase" },
  { fr: "la clé", en: "key" },
  { fr: "le téléphone", en: "phone" },
  { fr: "l'ordinateur", en: "computer" },
  { fr: "le clavier", en: "keyboard" },
  { fr: "la souris", en: "mouse" },
  { fr: "l'écran", en: "screen" },
  { fr: "la télévision", en: "television" },
  { fr: "la télécommande", en: "remote control" },
  { fr: "le casque", en: "headset" },
  { fr: "le chargeur", en: "charger" },
  { fr: "le câble", en: "cable" },
  { fr: "la voiture", en: "car" },
  { fr: "le vélo", en: "bicycle" },
  { fr: "la moto", en: "motorcycle" },
  { fr: "le bus", en: "bus" },
  { fr: "le train", en: "train" },
  { fr: "l'avion", en: "airplane" },
  { fr: "le bateau", en: "boat" },
  { fr: "le parc", en: "park" },
  { fr: "la forêt", en: "forest" },
  { fr: "la montagne", en: "mountain" },
  { fr: "la rivière", en: "river" },
  { fr: "le lac", en: "lake" },
  { fr: "la mer", en: "sea" },
  { fr: "l'océan", en: "ocean" },
  { fr: "la plage", en: "beach" },
  { fr: "le soleil", en: "sun" },
  { fr: "la lune", en: "moon" },
  { fr: "l'étoile", en: "star" },
  { fr: "le vent", en: "wind" },
  { fr: "la pluie", en: "rain" },
  { fr: "la neige", en: "snow" },
  { fr: "le nuage", en: "cloud" },
  { fr: "le ciel", en: "sky" },
  { fr: "le jardin", en: "garden" },
  { fr: "le fruit", en: "fruit" },
  { fr: "le légume", en: "vegetable" },
  { fr: "la fleur", en: "flower" },
  { fr: "l'arbre", en: "tree" },
  { fr: "la feuille", en: "leaf" },
  { fr: "la graine", en: "seed" },
  { fr: "la racine", en: "root" },
  { fr: "le tronc", en: "trunk" },
  { fr: "la branche", en: "branch" },
  { fr: "le bois", en: "wood" },
  { fr: "la pierre", en: "stone" },
  { fr: "le métal", en: "metal" },
  { fr: "le plastique", en: "plastic" },
  { fr: "le verre", en: "glass" },
  { fr: "le tissu", en: "cloth" },
  { fr: "le papier", en: "paper" },
  { fr: "le carton", en: "cardboard" },
  { fr: "la peinture", en: "paint" },
  { fr: "la couleur", en: "color" },
  { fr: "le pinceau", en: "paintbrush" },
  { fr: "le crayon", en: "pencil" },
  { fr: "le stylo", en: "pen" },
  { fr: "le cahier", en: "notebook" },
  { fr: "le livre", en: "book" },
  { fr: "la feuille de papier", en: "sheet of paper" },
  { fr: "le journal", en: "newspaper" },
  { fr: "le magazine", en: "magazine" },
  { fr: "la carte", en: "map" },
  { fr: "le billet", en: "ticket" },
  { fr: "la monnaie", en: "coins" },
  { fr: "le billet de banque", en: "banknote" },
  { fr: "le portefeuille", en: "wallet" },
  { fr: "la montre", en: "watch" },
  { fr: "le bijou", en: "jewel" },
  { fr: "la bague", en: "ring" },
  { fr: "le collier", en: "necklace" },
  { fr: "le bracelet", en: "bracelet" },
  { fr: "la chaussure", en: "shoe" },
  { fr: "la chaussette", en: "sock" },
  { fr: "le pantalon", en: "trousers" },
  { fr: "la jupe", en: "skirt" },
  { fr: "la chemise", en: "shirt" },
  { fr: "le t-shirt", en: "t-shirt" },
  { fr: "le manteau", en: "coat" },
  { fr: "la veste", en: "jacket" },
  { fr: "le chapeau", en: "hat" },
  { fr: "le gant", en: "glove" },
  { fr: "l'écharpe", en: "scarf" },
  { fr: "le parapluie", en: "umbrella" },
  { fr: "le sac à main", en: "handbag" },
  { fr: "le sac à dos", en: "backpack" },
  { fr: "la valise", en: "suitcase" }
];

const infinitives = [
  { fr: "faire", en: "to do" }, { fr: "jouer", en: "to play" }, { fr: "manger", en: "to eat" }, 
  { fr: "aller", en: "to go" }, { fr: "voir", en: "to see" }
];

// State
let currentMode="", currentCategory="", currentCard=null, askInFrench=true;
let score=0;
let remainingCards=[];

// Menus
function showSubMenu(mode){
  currentMode=mode; 
  document.getElementById("menu").classList.add("fade-out"); 
  setTimeout(()=>{
    document.getElementById("menu").style.display="none"; 
    document.getElementById("submenu").style.display="block"; 
    document.getElementById("menu").classList.remove("fade-out");
  },300);
}

function goBackToMain(){
  document.getElementById("submenu").style.display="none";
  document.getElementById("score-card").style.display="none";
  document.getElementById("menu").style.display="block";
}

function startGame(mode,category){
  currentMode=mode; 
  currentCategory=category; 
  score=0;
  remainingCards = [...(category==='infinitives'?infinitives:subjects)];
  document.getElementById("submenu").classList.add("fade-out"); 
  setTimeout(()=>{
    document.getElementById("submenu").style.display="none"; 
    document.getElementById("game").style.display="block"; 
    document.getElementById("submenu").classList.remove("fade-out");
    nextWord();
  },300);
}

// Next Word
function nextWord(){
  if(remainingCards.length===0){
    finishGame(); 
    return;
  }
  const answerBox=document.getElementById("answer");
  answerBox.value=""; 
  answerBox.className=""; 
  answerBox.focus();
  const idx=Math.floor(Math.random()*remainingCards.length); 
  currentCard=remainingCards.splice(idx,1)[0];
  askInFrench = currentMode==='fr-en'?true:currentMode==='en-fr'?false:Math.random()<0.5;
  document.getElementById("display-word").textContent = askInFrench?currentCard.fr:currentCard.en;
}

// Input Handling
document.getElementById("answer").addEventListener("input",function(){
  const answerBox=document.getElementById("answer");
  let correct = askInFrench?currentCard.en:currentCard.fr; 
  let val=answerBox.value.trim();
  
  if(val === "") {
    answerBox.className = "";
    return;
  }
  
  if(val.toLowerCase()===correct.toLowerCase()){
    answerBox.className="correct"; 
    score++; 
    setTimeout(nextWord,300);
  }
  else if(val.length>=correct.length){
    answerBox.className="incorrect";
  }
});

// Right Shift Peek - Improved with smooth animation
let peekTimeout;
document.addEventListener("keydown", function(e){
  if(e.code==="ShiftRight" && currentCard){
    clearTimeout(peekTimeout);
    document.getElementById("display-word").style.opacity = 0;
    
    peekTimeout = setTimeout(() => {
      document.getElementById("display-word").textContent = askInFrench?currentCard.en:currentCard.fr;
      document.getElementById("display-word").style.opacity = 1;
    }, 150);
  }
});

document.addEventListener("keyup", function(e){
  if(e.code==="ShiftRight" && currentCard){
    clearTimeout(peekTimeout);
    document.getElementById("display-word").style.opacity = 0;
    
    peekTimeout = setTimeout(() => {
      document.getElementById("display-word").textContent = askInFrench?currentCard.fr:currentCard.en;
      document.getElementById("display-word").style.opacity = 1;
    }, 150);
  }
});

// Finish
function finishGame(){
  document.getElementById("game").classList.add("fade-out"); 
  setTimeout(()=>{
    document.getElementById("game").style.display="none"; 
    document.getElementById("score-card").style.display="block"; 
    document.getElementById("game").classList.remove("fade-out");
    document.getElementById("score").textContent=`${score} correct out of ${(currentCategory==='infinitives'?infinitives:subjects).length}`;
  },300);
}

// Fixed Play Again function
function resetAndPlayAgain() {
  document.getElementById("score-card").classList.add("fade-out");
  setTimeout(() => {
    document.getElementById("score-card").style.display = "none";
    document.getElementById("score-card").classList.remove("fade-out");
    startGame(currentMode, currentCategory);
  }, 300);
}
</script>
</body>
</html>
