<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>French Flashcard Game v1.2.2</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Montserrat', sans-serif;
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  margin: 0;
  min-height: 100vh;
  position: relative;
}
h1 { margin-bottom: 20px; color: #333; }
.card {
  background: white;
  padding: 25px;
  border-radius: 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
  text-align: center;
  max-width: 500px;
  width: 100%;
  height: 300px;
  margin-bottom: 20px;
  opacity: 1;
  transition: opacity 0.4s ease, transform 0.4s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
}
button {
  margin: 8px;
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  background: #0077cc;
  color: white;
  cursor: pointer;
  font-size: 16px;
  font-family: 'Montserrat', sans-serif;
  transition: background 0.3s, transform 0.2s;
}
button:hover { background: #005fa3; transform: scale(1.05); }
#display-word { font-size: 38px; font-weight: 700; margin-bottom: 20px; }
#answer {
  font-size:20px; text-align:center; border-radius:8px; border:2px solid #ccc; padding:8px;
  transition: background 0.3s, border-color 0.3s;
}
#answer.correct { background:#e6ffe6; border-color:#2ecc71; color:black; }
#answer.incorrect { background:#ffe5e5; border-color:#e74c3c; color:black; }
#answer.hint { background:#eee; color:black; }
#score-card { text-align: center; }
#score-card button { margin-top: 10px; }
.missed { color: #666; font-size: 14px; margin-top: 5px; }
.fade-out { opacity:0; transform: scale(0.95);}
.version { position: fixed; bottom: 10px; right: 15px; font-size: 14px; color: #666; }
</style>
</head>
<body>
<h1>French Flashcard Game</h1>

<!-- Menu -->
<div class="card" id="menu">
  <p>Select practice mode:</p>
  <button onclick="showSubMenu('fr-en')">French → English</button>
  <button onclick="showSubMenu('en-fr')">English → French</button>
  <button onclick="showSubMenu('mixed')">Mixed Practice</button>
</div>

<!-- Sub Menu -->
<div class="card submenu" id="submenu" style="display:none;">
  <p>Select category:</p>
  <button onclick="startGame(currentMode, 'subjects')">Subjects</button>
  <button onclick="startGame(currentMode, 'infinitives')">Infinitives</button>
  <button onclick="goBackToMain()">Back</button>
</div>

<!-- Game -->
<div class="card" id="game" style="display:none;">
  <div id="display-word"></div>
  <div id="example" style="font-size:18px;margin-top:10px;"></div>
  <input type="text" id="answer">
  <button onclick="finishGame()">Finish</button>
</div>

<!-- Score -->
<div class="card" id="score-card" style="display:none;">
  <h2>Score</h2>
  <div id="score"></div>
  <div class="missed" id="missed"></div>
  <button onclick="goBackToMain()">Back to Menu</button>
  <button onclick="startGame(currentMode,currentCategory)">Play Again</button>
</div>

<div class="version">v1.2.2</div>

<script>
// Word Lists
const subjects = [
  { fr: "la pomme", en: "apple" }, { fr: "le chat", en: "cat" }, { fr: "la nuit", en: "night" }, 
  { fr: "le chien", en: "dog" }, { fr: "l'école", en: "school" }, { fr: "le livre", en: "book" }
];
const infinitives = [
  { fr: "faire", en: "to do" }, { fr: "jouer", en: "to play" }, { fr: "manger", en: "to eat" }, 
  { fr: "aller", en: "to go" }, { fr: "voir", en: "to see" }
];

// State
let currentMode="", currentCategory="", currentCard=null, askInFrench=true;
let score=0, missedCount=0;
let remainingCards=[];

// Menus
function showSubMenu(mode){currentMode=mode; document.getElementById("menu").classList.add("fade-out"); setTimeout(()=>{document.getElementById("menu").style.display="none"; document.getElementById("submenu").style.display="block"; document.getElementById("menu").classList.remove("fade-out");},300);}
function goBackToMain(){document.getElementById("submenu").style.display="none";document.getElementById("score-card").style.display="none";document.getElementById("menu").style.display="block";}
function startGame(mode,category){
  currentMode=mode; currentCategory=category; score=0; missedCount=0;
  remainingCards = [...(category==='infinitives'?infinitives:subjects)];
  document.getElementById("submenu").classList.add("fade-out"); setTimeout(()=>{
    document.getElementById("submenu").style.display="none"; document.getElementById("game").style.display="block"; document.getElementById("submenu").classList.remove("fade-out");
    nextWord();
  },300);
}

// Next Word
function nextWord(){
  if(remainingCards.length===0){finishGame(); return;}
  const answerBox=document.getElementById("answer");
  answerBox.value=""; answerBox.className=""; answerBox.style.background="#fff"; answerBox.focus();
  const idx=Math.floor(Math.random()*remainingCards.length); currentCard=remainingCards.splice(idx,1)[0];
  askInFrench = currentMode==='fr-en'?true:currentMode==='en-fr'?false:Math.random()<0.5;
  document.getElementById("display-word").textContent = askInFrench?currentCard.fr:currentCard.en;
  document.getElementById("example").textContent = currentCard.sentence||"";
}

// Input handling
document.getElementById("answer").addEventListener("keydown",function(e){
  if(e.key==="Enter"){
    const answerBox=document.getElementById("answer");
    let val=answerBox.value.trim();
    let correct = askInFrench?currentCard.en:currentCard.fr;

    if(val==="?"){
      answerBox.className="hint";
      answerBox.value=correct;
      answerBox.setSelectionRange(0,0); // start typing at beginning
      return;
    }

    if(val.toLowerCase()===correct.toLowerCase()){
      answerBox.className="correct";
      score++;
      setTimeout(nextWord,300);
    } else {
      answerBox.className="incorrect";
      missedCount++;
    }
  }
});
function finishGame(){
  document.getElementById("game").classList.add("fade-out"); setTimeout(()=>{
    document.getElementById("game").style.display="none"; document.getElementById("score-card").style.display="block"; document.getElementById("game").classList.remove("fade-out");
    document.getElementById("score").textContent=`Score: ${score}`;
    document.getElementById("missed").textContent=`Missed: ${missedCount}`;
  },300);
}
</script>
</body>
</html>
